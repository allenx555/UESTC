# 移动计算开发

[TOC]



## 信息

### 移动计算

概念：利用移动终端通过无线和固定网络与远程服务器**交换数据的分布计算环境**

特点：移动性、网络条件多样性、频繁断接性、通信的非对称性、移动设备电源能力和资源有限、传输的低可靠性

三要素：信息交互、无线通信、移动终端

通信需要解决的问题：

信息：编码——赋予信息以代码的过程，方便信息的存储、检索和使用

距离：时效——在一定时期内能够发生的效用，**距离是传输的根本问题**

载体：方式

运输：系统——按照一定次序组合的结构

安全：可靠——信号层面的安全，可靠传输提供了物理保障

### 信息的相关基本概念

信息：人类社会传播的一切内容

媒体：信息表示和传输的载体

信息传播：一切通过介质的流通渠道

#### 信号

运载消息的工具（声光电）

```
模拟信号转别为数字信号失真？以规则时间间隔采样
如何把离散信息转变为模拟信号以便空中传播？拟合
如何将比特流嵌入电磁波？调制
```

#### 信道

信道容量（速率）：信道上可以被传输的最大速率 bit/s(bps)

数据率（比特率）：在数字信道上传送数据的速率 bit/s(bps)

带宽（频率通带）：信道的信号上、下限频率 (Hz)

信道质量好坏：SNR = 信号功率/噪声功率  dB——相对值（1mW功率为基准） dBm——功率绝对值  

​						  0 dBm=10log1mw  30dBm-0dBm=30dB

香农定理：只要信息传输速率小于信道容量，就存在一类编码，使信息传输的错误概率可以任意小

### 信息的度量

- 编码
- 压缩
- 香农熵：随机变量的平均不确定性
  - 自信息量 -logP(Xi) 
  - 信源信息量(期望)：H(X)=E(-logP(Xi))

## 无线技术

### 无线电在大气中的传播

无线电波传播：发射源所发射的无线电波通过**自然条件下的媒介**到达**接收天线**的过程

#### 道路（信道）特性

1. 路径损耗：大尺度效应（固定障碍物在长距离上信号强度的缓慢变化）、阴影衰落、小尺度效应

2. 多径传播：电磁波遇到比波大得多的物体时发生反射

3. 有限资源：有线资源无限，无线资源有限

#### 频率

空分复用：电磁波的传播损耗，足够的隔离度，相隔一定距离，重复使用一组工作频率 20kHZ

小区制：覆盖地区划分若干校区，一个基站服务本小区用户，频率复用

蜂窝：同一小区簇不同频率，不同小区簇使用相同频率 N=7

多路复用：数据传输系统中，允许两个或多个数据源共享同一传输介质

多址接入：将若干无关信号合并为一个复合信道，在共用信道上进行传输，接收端分离

FDMA：一条传输介质、多个频率信号

TDMA：一条物理信道、分为若干时间片

CDMA：不同编码，区分各路信号

香农定理：传输速率相同信号，带宽既定（信噪比越高，速率越高），信噪比一定（带宽越大，速率越高）

### 短距离通讯

蓝牙、Zigbee、无线传感器、NFC、WIFI等相关概念

|          | 蓝牙           | NFC              | RFID           | Zigbee           |
| -------- | -------------- | ---------------- | -------------- | ---------------- |
| 标准     | IEEE 802.15    |                  |                | IEEE 802.15.4    |
| 特点     | 短距离，低成本 | 双向的识别和链接 | 双方设备主从   | 低功耗局域网协议 |
| 频段     | 2.4GHz         | 13.56MHz         | 低、高、超高频 |                  |
| 距离     |                | 20cm/10cm        | 几米-几十米    | 标准75m-扩展     |
| 工作模式 | TDD 时分双工   | 单芯片           | 阅读器+标签    |                  |
| 速率     | 1Mb/s (v2.0)   |                  |                |                  |
| 问题     | 同频干扰，鱼雷 |                  |                |                  |
| 其他     | 跳频技术       |                  |                |                  |

### WIFI

IEEE 802.11

基本服务集BSS -漫游-> 扩展服务集ESS

CSMA/CA：随机竞争类MAC协议实现无线信道的共享，无法进行冲突检测因为信号衰减（AC无法相互检测）、隐藏终端问题

CSMA/CD：IEEE802.3 载波侦听、冲突检测（随机延后发言时间），信道利用率高，介质电磁波

冲突避免：退避（BEB）算法进行冲突避免

CSMA/CA与CSMA/CD的区别：

1. 两者的传输介质不同,CSMA/CD用于总线式以太网,而CSMA/CA[]则用于无线局域网802.11
2. 载波检测方式：CSMA/CD通过电缆中电压的变化来检测；而CSMA/CA采用能量检测（ED）、载波检测（CS）和能量载波混合检测三种检测信道空闲的方式
3. CSMA/CA协议信道利用率低于CSMA/CD

### 无线传感器

组成：传感单元、处理单元、通讯单元、电源部分、其他功能单元（定位、运动、发电）

传感器网络实现了数据的采集、处理和传输三种功能

接入方式：单跳方式（固定基站，距离固定）、多跳方式

#### 组织方式

协作：**感知、采集和处理**网络覆盖区域特定信息，实现对**任意地点**信息在**任意时间**的感知、采集和处理

自组织：利用移动终路由转发，在无基础设施情况下通讯

平面网络结构：所有节点对等结构，具有完全一致功能特性

分级网络结构：上下层，上层骨干节点，下层一般传感器节点

Mesh网络结构：规则分布网络结构，通常只允许节点与最近邻居通信

#### 问题

可扩展性：节点数目巨大

能量受限

健壮性：节点受损概率大于传统网络节点

拓扑结构变化：高密度部署，网络拓扑结构变化快

无效能耗来源：空闲监听、数据冲突、串扰、控制开销

#### S-MAC

需求：传感器网络节省能量需求

目标：良好扩展性，减少节点能耗

适用条件：数据传输量不大，容忍一定通信延迟，网络内部处理融合数据

- 周期性侦听和睡眠

- 邻居节点虚拟簇，簇内睡醒时间表一致

- 虚拟载波侦听，TRS/CTS握手，随机退避访问信道避免碰撞串音

- 消息分割减少控制开销

周期性侦听和睡眠：时间分帧，帧分侦听工作阶段和睡眠阶段，每个节点使用SYNC消息（源节点地址、下次睡眠时间）通告调度信息，维护调度表

同步机制：节点进入工作室先侦听固定时间，调整调度信息与其他借点一直，经随机时间广播调度信息，信息不一致是调整为第一个收到的邻居节点信息并记录其他邻居，若没收到任何调度信息则自己产生并广播

流量自适应监听：多跳通信节点的周期睡眠会导致延迟累加，一次通信中节点邻居通信结束后唤醒并保持监听，收到RTS帧理科接受

虚拟载波侦听：NAV表示邻居节点活动时间，每个数据包包含持续时间指示值，NAV被视为计时器，NAV=0节点睡眠避免串音，NAV!=0醒来准备通信

长消息传递：节点预留信道，当一分片未收到ACK响应，节点自动将信道预留向后延长一个分片传输时间，并重传该分片

### Adhoc

一组带有无线收发装置的移动节点组成的多跳临时自治网络

#### 网络路由

设计思路：修改现有有线网络路由协议、基于按需路由发现的路由原则设计路由协议、基于QoS路由选择满足用户QoS路由

AODV：DSR的按需路由发现和路由维护，DSDV的逐跳路由、顺序编号、路由维护周期更新，支持组播、QoS不支持单向信道

路由请求(RREQ) 路由应答(RREP)

### 隐藏终端

一个终端位于接受者的通信范围之内，而在发送者的通信范围之外

隐藏发送终端：握手方法（RTS/CTS）

![image-20191208215303307](C:\Users\allen\AppData\Roaming\Typora\typora-user-images\image-20191208215303307.png)

隐藏接收终端：单信道条件

![image-20191208215338530](C:\Users\allen\AppData\Roaming\Typora\typora-user-images\image-20191208215338530.png)

暴露终端问题：在发送节点的覆盖范围内而在接收节点的覆盖范围外的节点

![image-20191208215507829](C:\Users\allen\AppData\Roaming\Typora\typora-user-images\image-20191208215507829.png)

![image-20191208215537387](C:\Users\allen\AppData\Roaming\Typora\typora-user-images\image-20191208215537387.png)

原因：电台频率和发射半价比较低；信号易受噪声；信道衰落和障碍物影响；移动节点的通信距离受到限制

影响：网络时隙资源无序争用浪费；增加数据碰撞概率，影响网络吞吐、容量和数据传输延迟；隐藏终端使接收端无法正确接收数据；暴露终端降低信道利用率

解决：单信道下会用控制报文法能解决隐发送终端，无法解决隐接收端和暴露终端，双信道下用数据信道收发数据，控制信道收发控制信号

### 移动IP

维持正在进行的网络连接，移动节点的地址始终保持不变

技术：移动节点通过永久IP地址连接到链路，全世界漫游；移动主机切换到新链路时，仍能保持进行的通信；IP地址标识主机和物理位置；所有移动节点和代理服务器通过无线方式一跳互连

家乡代理：节点位于家乡（本地）连路上的路由器，当节点离开家乡网络时负责把发往节点的分组通过**隧道转发**给移动节点

外地代理：位于外地所访问的网络上的路由器，为移动节点的注册过程提供路由服务，将家乡代理通过隧道发来的报文拆封后**转发**给移动节点，对移动节点发出的报文提供**路由服务**

家乡地址：每个节点在**家乡链路**上拥有的**长期有效**IP地址，移动节点的永久IP地址

转交地址：节点离开家乡链路后被赋予的**反映当前链路接入点的临时地址** 通常是外地代理FA的IP地址

家乡链路：与移动节点的家乡地址**具有相同IP前缀的网络**，发往家乡地址的IP分组会被**标准的IP路由机制**转发

外地链路：节点移动到家乡网络以外的链路，**网络前缀**与移动节点家乡地址网络前缀不同，外地链路精确的描述了**移动节点移动时的位置**

隧道：当一个数据分组被封装在另一个数据分组的**净荷**中进行传送时所经过的路径

净荷：一个帧（包）中传输的用户数据部分

#### 代理发现

移动代理周期性在一条或多条链路上组播或广播代理通告；

代理通告说明移动代理的网络地址，通告有效期等；

移动节点根据收到的通告消息判断位于家乡还是外地链路；

如果在外地连路上则向家乡代理进行注册

#### 注册

当移动节点得到外地链路转交地址后，通过移动IP定义的消息向家乡代理请求注册

家乡代理确认后，将家乡地址和相应转交地址放在绑定内存中

家乡代理完成相应移动节点的家乡地址和转交地址绑定

向移动节点发送注册应答

#### 注销

移动节点收到代理通告，判断是否返回家乡链路

返回家乡后，移动节点向家乡代理注销以前的注册

完全注销，家乡代理认为节点已经回到本地

### 重点

- S-mac
- 路径丢失
- Aodv路由技术
- 隐藏终端
- Csma/cd csma/ca

## 定位技术

### GPS、北斗的基本概念

GPS是通过接收和解译人造卫星发生电波信号来确定测站点位置的定位系统

组成：卫星星座、地面监测系统、GPS接收机

#### 基本思想：

卫星发射的测距码信号经过t秒传播后到达接收机

接收机产生一个结构相同的复制码序列

演示器调整复制码延迟时间，是两组码序列自相关系数达到最大值

延迟时间等于t

> 不计算
>
> 为什么需要4个卫星（时钟）：
>
> 用户钟的测时精度远低于卫星钟，用户钟与卫星钟不可能同步，存在时钟差tu
>
> Di'=Di+C*tu

#### 定位方法

单点定位：精度30m左右，不能满足一般工程测量要求，但在船舶飞机导航领域有广泛应用

相对定位：两台同类型接收机同步跟踪相同4颗卫星信号

差分定位：各接收机同时进行单点定位，基准站测定坐标，定位结果的改正数（位置差分），伪距观测值改正数（伪距差分）

#### 测距

Time Of Arrival：通过测出电波从手机传播到多个基站的时间确定手机位置，手机和基站时间精确同步

Time Difference Of Arrival：检测信号到达两个基站的时间差，降低时间同步要求，误差环境下性能相对优越，精度较高

Angle Of Arrival：由两个或更多基站通过测量接收信号的到达角来估计位置

RSSI：通过接信号强弱测定，受反射散射绕射多重路径衰减遮挡影响非常严重，存在较大误差



### 其他定位技术的基本概念

位置服务（LBS）：移动通信网络和卫星定位系统结合提供的增值业务，通过一组定位技术获得移动端位置信息，提供给本人或他人以及通信系统实现各种位置相关业务

A-GPS：服务器保存卫星完整轨迹资料，移动基站与A-GPS服务器相连

基站定位服务：通过移动通信网络获取位置信息，在电子地图平台支持下提供相应服务

RSSI定位：接收节点收到的信号强度与发射结点的强度，计算传播损耗，转为距离计算位置，具有较大误差

WIFI定位：无线AP有全球唯一MAC地址，网络接入AP广播MAC，扫描收集AP获取MAC地址

IP定位技术：完备IP地址数据库，精度差，维护完善困难

一些定位算法根据时延和地理距离间线性关系估测主机位置，通过拓扑信息减少定位误差

#### Cell ID

小区识别码

每个小区有全球唯一的 CGI=MCC（移动国家代码）+MNC（移动网络代码）+LAC（位置区代码）+CI

小区基站相对固定构成稳定基站位置数据库，利用基站位置和覆盖范围标识终端位置，精确度与小区密度大小有关，CGI结合TA提高精度

#### 室内定位

红外线：待测物体电子标识，红外线IR标识，较高室内进度，易被灯光干扰，不能穿过障碍物

超声波：反射式测距发，时间差测距，三角定位确定位置，精度高结构简单，成本高，受多径非视距影响大

蓝牙：多基站广播报文

射频识别：利用射频标签识别定位物体，距离短造价低不具备通信能力

超宽带

无线局域网：小范围室内定位，成本低 覆盖90m，精确1-20m，易受其他信号干扰

ZigBee：数千传感器，待定位盲节点已知参考节点和网关实现组网，节点间协调通信，通信效率高，低功耗低成本，接力方式传递数据

#### 位置无关

质心定位算法：粗定位算法，利用网络连通度实现定位

DV-HOP：参考节点稀疏网络中定位，距离矢量路由跳计数技术

APIT算法

## Android 开发技术

### 基本概念

应用层、应用程序框架层、系统运行库层、内核层|硬件抽象层

架构：

MVC模式

Quiz设计

### 活动及其在栈中的处理方式


```
Intent及通过其和活动的关系
参数在活动中的传递和返回
事件的处理方式
```

### 事件

#### 基于监听器的事件处理

事件监听器注册时间

事件源发生事件

事件触发事件监听器响应-事件监听器响应特定事件

事件处理

#### 基于回掉的事件处理

注册回调方法，约定接口，回调

### Intent

Intent是一个动作的完整描述，包含了动作的产生组件、接受组件和传递的数据信息

程序运行中链接两个组件 协助应用间的交互与通讯

隐式Intent：不用类名，通过action启动，启动组件允许来自另一个app，需要Intent过滤器

使用Intent传递消息：

- 传值：intentputExtra()，添加附加数据
- Serializeable：将对象转换为课存储可传输的状态
- Parcelable：更高效的传递对象方式

职责：

- Intent负责对应用中一次操作的动作、数据、附加数据描述
- Android负责找到对应组件，将Intent传递并完成组件调用
- Intent不仅可以用于应用程序见，也可以用于程序内部交互

用途：

- Activity：使用Context.startActivity()或Activity.startActivityForResult(),传入一个intent来启动一个activity

- Servive：Context.startService()启动一个service或穿消息，将intent对象传给Context.bindService()来绑定一个service

- Boardcast Receiver：广播消息
  

### 常见布局

- 线性
- ...

### 常见控件及其事件处理

### 碎片

- Activity的模块化组件

- 不同的fragment组合放在一个activity中

- 有自己的生命周期

- 在不同activity中重用一个fragment

不能独立存在，必须嵌入activity；生命周期手activity影响

### 数据的存储及解析

> 不写，需要读懂代码

- 数据库
- Xml
- Json

### 广播、线程、服务、权限等基本概念

#### 多线程编程

继承、实现接口

匿名类

#### 关键权限动态